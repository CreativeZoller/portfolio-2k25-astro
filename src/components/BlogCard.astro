---
export interface Props {
    title: string;
    slug: string;
    image: string;
    author: string;
    date: string;
    description: string;
    tags: { name: string; class: string }[];
}
const linkIcon = await import('../../public/blogcard-link-icon.svg?raw');
const { title, slug, image, author, date, description, tags } = Astro.props;
const formattedDate = new Date(date).toLocaleDateString();
const encodedAuthor = encodeURIComponent(author.toLowerCase().replace(/\s+/g, '-'));
---
<div class="card-container bg-white rounded-xl shadow-md hover:shadow-lg transition overflow-hidden">
    <div class="aspect-w-16 aspect-h-9 overflow-hidden">
        <img src={image} alt="" class="object-cover w-full h-full transition-transform duration-300 ease-in-out" />
    </div>
    <div class="p-4 flex flex-col flex-grow">
        <div class="flex items-center justify-between mb-2">
            <a href={`/blog/author/${encodedAuthor}`} class="text-sm text-accent-2 card-author hover:underline">
                {author} â€¢ {formattedDate}
            </a>
        </div>
        <a href={`/blog/${slug}`} class="group block text-accent-1 no-underline cursor-pointer">
            <hgroup class="text-lg font-semibold mb-2 flex items-baseline justify-between">
                <h3 class="card-title transition-colors duration-300 ease-in-out text-accent-1">{title}</h3>
                <div class="item-icon text-accent-1 -m-2">
                    <Fragment set:html={linkIcon.default} />
                </div>
            </hgroup>
        </a>
        <p class="text-accent-1 text-sm mb-3 flex-grow">{description}</p>
        <div class="flex space-x-2 mt-auto">
        {tags.map((tag) => {
            const encodedTagName = encodeURIComponent(tag.name.toLowerCase().replace(/\s+/g, '-'));
            return (
                <a href={`/blog/tag/${encodedTagName}`} class="no-underline">
                    <span class={`inline-block rounded-full px-2 py-1 text-xs font-semibold text-gray-700 ${tag.class} hover:opacity-80 transition`}>{tag.name}</span>
                </a>
            );
        })}
        </div>
    </div>
</div>

<style>
    .item-icon {
        flex-shrink: 0;
        width: 28px;
        height: 24px;
        transform: rotate(0deg);
        transition: transform 0.3s ease-in-out;
    }

    .card-container .item-icon {
        color: var(--accent-1) !important;
    }

    .card-container:hover .item-icon,
    .card-container:focus .item-icon {
        transform: rotate(45deg);
    }

    .card-container:hover img {
        transform: scale(1.05);
    }

    .card-container:hover .card-title {
        color: var(--accent-2);
    }

    .card-container {
        display: flex;
        flex-direction: column;
        height: 100%;
    }
</style>